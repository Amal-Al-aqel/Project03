{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\96655\\\\OneDrive\\\\Desktop\\\\Tuwaiq\\\\React\\\\Project03\\\\src\\\\Wheel.js\",\n    _s = $RefreshSig$();\n\nimport { createEvent } from '@testing-library/dom';\nimport React, { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Wheel(props) {\n  _s();\n\n  const colors = props.colors;\n  const sectors = props.itemsList.map(function (element, index) {\n    return {\n      label: element,\n      color: colors[index].hex.value\n    };\n  });\n\n  function drawSector(sector, i) {\n    const ang = arc * i;\n    ctx.save(); // COLOR\n\n    ctx.beginPath();\n    ctx.fillStyle = sector.color;\n    ctx.moveTo(rad, rad);\n    ctx.arc(rad, rad, rad, ang, ang + arc);\n    ctx.lineTo(rad, rad);\n    ctx.fill(); // TEXT\n\n    ctx.translate(rad, rad);\n    ctx.rotate(ang + arc / 2);\n    ctx.textAlign = \"right\";\n    ctx.fillStyle = \"#fff\";\n    ctx.font = \"bold 20px sans-serif\";\n    ctx.fillText(sector.label, rad - 10, 10); //\n\n    ctx.restore();\n  }\n\n  ;\n\n  function rotate() {\n    const sector = sectors[getIndex()];\n    ctx.canvas.style.transform = `rotate(${ang - PI / 2}rad)`;\n    EL_spin.textContent = !angVel ? \"SPIN\" : sector.label;\n    EL_spin.style.background = sector.color;\n  }\n\n  function frame() {\n    if (!angVel) return;\n    angVel *= friction; // Decrement velocity by friction\n\n    if (angVel < 0.002) angVel = 0; // Bring to stop\n\n    ang += angVel; // Update angle\n\n    ang %= TAU; // Normalize angle\n\n    rotate();\n  }\n\n  function engine() {\n    frame();\n    requestAnimationFrame(engine);\n  }\n\n  useEffect(() => {\n    const rand = (m, M) => Math.random() * (M - m) + m;\n\n    const tot = sectors.length;\n    const EL_spin = document.querySelector(\"#spin\");\n    const ctx = document.querySelector(\"#wheel\").getContext('2d');\n    const dia = ctx.canvas.width;\n    const rad = dia / 2;\n    const PI = Math.PI;\n    const TAU = 2 * PI;\n    const arc = TAU / sectors.length;\n    const friction = 0.991; // 0.995=soft, 0.99=mid, 0.98=hard\n\n    let angVel = 0; // Angular velocity\n\n    let ang = 0; // Angle in radians\n\n    const getIndex = () => Math.floor(tot - ang / TAU * tot) % tot;\n\n    sectors.forEach(drawSector);\n    rotate(); // Initial rotation\n\n    engine(); // Start engine\n\n    EL_spin.addEventListener(\"click\", () => {\n      if (!angVel) angVel = rand(0.25, 0.35);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"wheelOfFortune\",\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"wheel\",\n      width: \"400\",\n      height: \"400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"spin\",\n      children: \"SPIN\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Wheel, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Wheel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wheel\");","map":{"version":3,"sources":["C:/Users/96655/OneDrive/Desktop/Tuwaiq/React/Project03/src/Wheel.js"],"names":["createEvent","React","useEffect","Wheel","props","colors","sectors","itemsList","map","element","index","label","color","hex","value","drawSector","sector","i","ang","arc","ctx","save","beginPath","fillStyle","moveTo","rad","lineTo","fill","translate","rotate","textAlign","font","fillText","restore","getIndex","canvas","style","transform","PI","EL_spin","textContent","angVel","background","frame","friction","TAU","engine","requestAnimationFrame","rand","m","M","Math","random","tot","length","document","querySelector","getContext","dia","width","floor","forEach","addEventListener"],"mappings":"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","sourcesContent":["import { createEvent } from '@testing-library/dom';\r\nimport React, { useEffect } from 'react';\r\n\r\nexport default function Wheel(props) {\r\n    const colors = props.colors;\r\n    const sectors = props.itemsList.map(function (element, index) {\r\n        return { label: element, color: colors[index].hex.value }\r\n    });\r\n\r\n\r\n    function drawSector(sector, i) {\r\n        const ang = arc * i;\r\n        ctx.save();\r\n        // COLOR\r\n        ctx.beginPath();\r\n        ctx.fillStyle = sector.color;\r\n        ctx.moveTo(rad, rad);\r\n        ctx.arc(rad, rad, rad, ang, ang + arc);\r\n        ctx.lineTo(rad, rad);\r\n        ctx.fill();\r\n        // TEXT\r\n        ctx.translate(rad, rad);\r\n        ctx.rotate(ang + arc / 2);\r\n        ctx.textAlign = \"right\";\r\n        ctx.fillStyle = \"#fff\";\r\n        ctx.font = \"bold 20px sans-serif\";\r\n        ctx.fillText(sector.label, rad - 10, 10);\r\n        //\r\n        ctx.restore();\r\n    };\r\n\r\n    function rotate() {\r\n        const sector = sectors[getIndex()];\r\n        ctx.canvas.style.transform = `rotate(${ang - PI / 2}rad)`;\r\n        EL_spin.textContent = !angVel ? \"SPIN\" : sector.label;\r\n        EL_spin.style.background = sector.color;\r\n    }\r\n\r\n    function frame() {\r\n        if (!angVel) return;\r\n        angVel *= friction; // Decrement velocity by friction\r\n        if (angVel < 0.002) angVel = 0; // Bring to stop\r\n        ang += angVel; // Update angle\r\n        ang %= TAU; // Normalize angle\r\n        rotate();\r\n    }\r\n\r\n    function engine() {\r\n        frame();\r\n        requestAnimationFrame(engine)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const rand = (m, M) => Math.random() * (M - m) + m;\r\n        const tot = sectors.length;\r\n        const EL_spin = document.querySelector(\"#spin\");\r\n        const ctx = document.querySelector(\"#wheel\").getContext('2d');\r\n        const dia = ctx.canvas.width;\r\n        const rad = dia / 2;\r\n        const PI = Math.PI;\r\n        const TAU = 2 * PI;\r\n        const arc = TAU / sectors.length;\r\n\r\n        const friction = 0.991; // 0.995=soft, 0.99=mid, 0.98=hard\r\n        let angVel = 0; // Angular velocity\r\n        let ang = 0; // Angle in radians\r\n        const getIndex = () => Math.floor(tot - ang / TAU * tot) % tot;\r\n\r\n        sectors.forEach(drawSector);\r\n        rotate(); // Initial rotation\r\n        engine(); // Start engine\r\n        EL_spin.addEventListener(\"click\", () => {\r\n            if (!angVel) angVel = rand(0.25, 0.35);\r\n        });\r\n\r\n    }, [])\r\n    return (\r\n        <div id=\"wheelOfFortune\" >\r\n            <canvas id=\"wheel\" width=\"400\" height=\"400\"></canvas>\r\n            <div id=\"spin\">SPIN</div>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}