{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\96655\\\\OneDrive\\\\Desktop\\\\Tuwaiq\\\\React\\\\Project03\\\\src\\\\Wheel.js\",\n    _s = $RefreshSig$();\n\nimport { createEvent } from '@testing-library/dom';\nimport React, { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Wheel(props) {\n  _s();\n\n  const itemsList = props.itemsList;\n  const colors = props.colors;\n  let sectors = itemsList.map(function (element, index) {\n    return {\n      label: element,\n      color: colors[index].hex.value\n    };\n  });\n\n  const rand = (m, M) => Math.random() * (M - m) + m;\n\n  const tot = sectors.length;\n  const EL_spin = document.querySelector(\"#spin\");\n  console.log(EL_spin);\n  const ctx = document.querySelector(\"#wheel\").getContext('2d');\n  const dia = ctx.canvas.width;\n  const rad = dia / 2;\n  const PI = Math.PI;\n  const TAU = 2 * PI;\n  const arc = TAU / sectors.length;\n  const friction = 0.991; // 0.995=soft, 0.99=mid, 0.98=hard\n\n  let angVel = 0; // Angular velocity\n\n  let ang = 0; // Angle in radians\n\n  const getIndex = () => Math.floor(tot - ang / TAU * tot) % tot;\n\n  function drawSector(sector, i) {\n    const ang = arc * i;\n    ctx.save(); // COLOR\n\n    ctx.beginPath();\n    ctx.fillStyle = sector.color;\n    ctx.moveTo(rad, rad);\n    ctx.arc(rad, rad, rad, ang, ang + arc);\n    ctx.lineTo(rad, rad);\n    ctx.fill(); // TEXT\n\n    ctx.translate(rad, rad);\n    ctx.rotate(ang + arc / 2);\n    ctx.textAlign = \"right\";\n    ctx.fillStyle = \"#fff\";\n    ctx.font = \"bold 20px sans-serif\";\n    ctx.fillText(sector.label, rad - 10, 10); //\n\n    ctx.restore();\n  }\n\n  ;\n\n  function rotate() {\n    const sector = sectors[getIndex()];\n    ctx.canvas.style.transform = `rotate(${ang - PI / 2}rad)`;\n    EL_spin.textContent = !angVel ? \"SPIN\" : sector.label;\n    EL_spin.style.background = sector.color;\n  }\n\n  function frame() {\n    if (!angVel) return;\n    angVel *= friction; // Decrement velocity by friction\n\n    if (angVel < 0.002) angVel = 0; // Bring to stop\n\n    ang += angVel; // Update angle\n\n    ang %= TAU; // Normalize angle\n\n    rotate();\n  }\n\n  function engine() {\n    frame();\n    requestAnimationFrame(engine);\n  }\n\n  useEffect(() => {\n    console.log(\"useEffect\"); // INIT\n\n    sectors.forEach(drawSector);\n    console.log(sectors);\n    rotate(); // Initial rotation\n\n    engine(); // Start engine\n\n    EL_spin.addEventListener(\"click\", () => {\n      if (!angVel) angVel = rand(0.25, 0.35);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"wheelOfFortune\",\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"wheel\",\n      width: \"400\",\n      height: \"400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"spin\",\n      children: \"SPIN\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Wheel, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Wheel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wheel\");","map":{"version":3,"sources":["C:/Users/96655/OneDrive/Desktop/Tuwaiq/React/Project03/src/Wheel.js"],"names":["createEvent","React","useEffect","Wheel","props","itemsList","colors","sectors","map","element","index","label","color","hex","value","rand","m","M","Math","random","tot","length","EL_spin","document","querySelector","console","log","ctx","getContext","dia","canvas","width","rad","PI","TAU","arc","friction","angVel","ang","getIndex","floor","drawSector","sector","i","save","beginPath","fillStyle","moveTo","lineTo","fill","translate","rotate","textAlign","font","fillText","restore","style","transform","textContent","background","frame","engine","requestAnimationFrame","forEach","addEventListener"],"mappings":"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","sourcesContent":["import { createEvent } from '@testing-library/dom';\r\nimport React, { useEffect } from 'react';\r\n\r\nexport default function Wheel(props) {\r\n    const itemsList = props.itemsList;\r\n    const colors = props.colors;\r\n    let sectors = itemsList.map(function (element, index) {\r\n        return { label: element, color: colors[index].hex.value }\r\n    });\r\n\r\n    const rand = (m, M) => Math.random() * (M - m) + m;\r\n    const tot = sectors.length;\r\n    const EL_spin = document.querySelector(\"#spin\");\r\n    console.log(EL_spin);\r\n    const ctx = document.querySelector(\"#wheel\").getContext('2d');\r\n    const dia = ctx.canvas.width;\r\n    const rad = dia / 2;\r\n    const PI = Math.PI;\r\n    const TAU = 2 * PI;\r\n    const arc = TAU / sectors.length;\r\n\r\n    const friction = 0.991; // 0.995=soft, 0.99=mid, 0.98=hard\r\n    let angVel = 0; // Angular velocity\r\n    let ang = 0; // Angle in radians\r\n    const getIndex = () => Math.floor(tot - ang / TAU * tot) % tot;\r\n\r\n    function drawSector(sector, i) {\r\n        const ang = arc * i;\r\n        ctx.save();\r\n        // COLOR\r\n        ctx.beginPath();\r\n        ctx.fillStyle = sector.color;\r\n        ctx.moveTo(rad, rad);\r\n        ctx.arc(rad, rad, rad, ang, ang + arc);\r\n        ctx.lineTo(rad, rad);\r\n        ctx.fill();\r\n        // TEXT\r\n        ctx.translate(rad, rad);\r\n        ctx.rotate(ang + arc / 2);\r\n        ctx.textAlign = \"right\";\r\n        ctx.fillStyle = \"#fff\";\r\n        ctx.font = \"bold 20px sans-serif\";\r\n        ctx.fillText(sector.label, rad - 10, 10);\r\n        //\r\n        ctx.restore();\r\n    };\r\n\r\n    function rotate() {\r\n        const sector = sectors[getIndex()];\r\n        ctx.canvas.style.transform = `rotate(${ang - PI / 2}rad)`;\r\n        EL_spin.textContent = !angVel ? \"SPIN\" : sector.label;\r\n        EL_spin.style.background = sector.color;\r\n    }\r\n\r\n    function frame() {\r\n        if (!angVel) return;\r\n        angVel *= friction; // Decrement velocity by friction\r\n        if (angVel < 0.002) angVel = 0; // Bring to stop\r\n        ang += angVel; // Update angle\r\n        ang %= TAU; // Normalize angle\r\n        rotate();\r\n    }\r\n\r\n    function engine() {\r\n        frame();\r\n        requestAnimationFrame(engine)\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(\"useEffect\");\r\n        \r\n        // INIT\r\n        sectors.forEach(drawSector);\r\n        console.log(sectors);\r\n        rotate(); // Initial rotation\r\n        engine(); // Start engine\r\n        EL_spin.addEventListener(\"click\", () => {\r\n            if (!angVel) angVel = rand(0.25, 0.35);\r\n        });\r\n\r\n    }, [])\r\n    return (\r\n        <div id=\"wheelOfFortune\" >\r\n                <canvas id=\"wheel\" width=\"400\" height=\"400\"></canvas>\r\n                <div id=\"spin\">SPIN</div>\r\n            </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}